<!doctype html>
<html lang="en" class="h-full scroll-smooth">
<head>
    <meta charset="UTF-8"/>
    <link href="/vite.svg" rel="icon" type="image/svg+xml"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Solana Wallet (Alpine.js)</title>
    <!-- Tailwind CSS is expected to be linked via src/style.css or similar by Vite -->
</head>
<body class="min-h-screen bg-neutral-900 text-neutral-100 relative pt-12 flex flex-col items-center"
      x-data <!-- x-data can be empty if we only use $store, or we can define the store access here if preferred -->
      x-init="$store.wallet.init()">

    <!-- Background Styling (from original) -->
    <div aria-hidden="true"
         class="absolute opacity-50 top-0 -z-10 h-full w-full bg-[linear-gradient(to_right,#4f4f4f2e_1px,transparent_1px),linear-gradient(to_bottom,#4f4f4f2e_1px,transparent_1px)] bg-[size:32px_32px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)]"></div>

    <div id="app" class="max-w-md w-full bg-white border border-neutral-300 rounded-md text-neutral-800 p-6 space-y-4">
        <h1 class="text-2xl font-bold text-center">Solana Wallet</h1>

        <!-- Loader -->
        <div x-show="$store.wallet.isLoading" x-transition
             class="fixed inset-0 bg-neutral-900 bg-opacity-75 flex items-center justify-center z-50">
            <div class="bg-white text-neutral-800 p-4 rounded-md shadow-lg animate-pulse">
                Loading...
            </div>
        </div>

        <!-- Message Area -->
        <div x-show="$store.wallet.message" x-text="$store.wallet.message"
             class="p-3 rounded-md text-sm"
             :class="{
                'bg-blue-100 text-blue-700': $store.wallet.messageType === 'info',
                'bg-red-100 text-red-700': $store.wallet.messageType === 'error',
                'bg-green-100 text-green-700': $store.wallet.messageType === 'success'
             }"
             x-transition>
        </div>

        <!-- Connect Button -->
        <template x-if="!$store.wallet.isConnected">
            <button @click="$store.wallet.connectWallet()"
                    class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded transition-colors">
                Connect Phantom Wallet
            </button>
        </template>

        <!-- Wallet Info & Actions -->
        <template x-if="$store.wallet.isConnected">
            <div class="space-y-3">
                <div>
                    <p class="text-sm font-medium text-gray-500">Wallet Address:</p>
                    <p class="text-xs break-all" x-text="$store.wallet.publicKey"></p>
                </div>
                <div>
                    <p class="text-sm font-medium text-gray-500">Balance:</p>
                    <p><span x-text="$store.wallet.balance"></span> SOL</p>
                </div>
                <button @click="$store.wallet.fetchBalance()"
                        class="w-full bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition-colors">
                    Refresh Balance
                </button>
                <button @click="$store.wallet.disconnectWallet()"
                        class="w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition-colors">
                    Disconnect Wallet
                </button>
            </div>
        </template>
    </div>

    <script src="/src/main.ts" type="module"></script>
</body>
</html>
